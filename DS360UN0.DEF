
5067-     814        18
5067.02   410        18
5063      1024       29


БУС


0000000000000000000000
01234567
0       - КОМАНДА ОТВЕРГНУТА
					недействительный код команды
					недействительная последовательность команд
					недействительный или неполный аргумент
							 передан при управляющей команде
					дорожка сформатирована без собственного адреса
					выполнение команды записи нарушает маску защиты файла
					неправильный адрес запасной или альтернативной дорожки
					команда записи выдана в накопитель который ТОЛЬКО ЧТЕНИЕ

 1      - ТРЕБУЕТСЯ ВМЕШАТЕЛЬСТВО
					неподключен к системе
					не находится в состоянии готовности

	2     - ОШИБКА ШИН-К
					ошибочная четность при приеме данных от канала

	 3    - СБОЙ ОБОРУДОВАНИЯ
					необычное состояние УУ

		4   - СБОЙ ДАННЫХ
					обнаружена корректируемая ошибка данных в информации
					(в 5-22 байты состояния)
					обнаружена некорректируемая ошибка
					(в байте 7)

		 5  - ПЕРЕПОЛНЕНИЕ

			6 - РАВЕН 0
			 7- РАВЕН 0

111111111111111111111111
01234567
0       - ПОСТОЯННАЯ ОШИБКА

 1      - НЕДЕЙСТВИТЕЛЕН ФОРМАТ ДОРОЖКИ
					обнаружена запиь с длиной превышающей емкость дорожки

	2     - КОНЕЦ ЦИЛИНДРА
					выполнение МТ считывания или поиска перешло за границы
					адресуемого цилиндра
					выполнение переходящей записи перешло за граници
					адресуемого цилиндра (БИТ 7 БАЙТ 1 -НЕЗАКОНЧЕННАЯ ОПЕРАЦИЯ тоже
					установлен)

	 3    - РАВЕН 0

		4   - НЕ ОБНАРУЖЕНА
					два раза обнаружен индекс в одной и тойже цепочке команд
					без выполнения считывания в области СА или данных
					два раза обнаружен индекс в одной и тойже цепочке команд
					без выполнения команд типа записи уточнить состояние
					или управление


		 5  - ЗАЩИТА ФАЙЛА
					команда установки нарушила маску защиты
					операция МТ считывания илил поиска нарушила маску защиты
					операция обрабатывающая переходящуюзапись нарушила маску
					установки

			6 - ЗАПРЕТ ЗАПИСИ
					устанав при выдаче команд записи в накопитель для которого
					запись запрещена

			 7- НЕЗАКОНЧЕННАЯ ОПЕРАЦИЯ
					переход к области защищенного файла (включается и бит защиты файла)
					переход за границы цилиндра (также КОНЕЦ ЦИЛИНДРА)
					обнаружен корректируемый сбой (также КОНЕЦ ЦИЛИНДРА)
					обнаружен некорректирумый сбой
					обнаружен флаг дефектной и альтернативной дорожки
					обнаружен сбой установки

222222222222222222222
01234567
0       - РАВЕН 0
 1      - КОРРЕКТИРУЕМЫЙ СБОЙ
	2     - ВЫБРАН АЛЬТЕРНАТИВНЫЙ МОДУЛЬ (для 317)
	 3    - СТАТИСТИЧЕСКАЯ ИНФОРМАЦИЯ
					(в БУС 8-23)
		4567- РАВЕН 0

3333333333333333333333
01234567- когда установлен бит 7 байта 1 НЕЗАКОНЧЕННАЯ ОПЕРАЦИЯ
					этот байт определяет оперецию при которой обнаружено преравание
00000110- команда считывания
00000101- команда записи
00000000- в ином случае



4444444444444444444444
01234567
01      -физический адрес управляющего модуля(100-200MB
	234567-физический адрес накопителя         (100-200MB)
	111000-A
	110001-B
	101010-C
	100011-D
	011100-E
	010101-F
	001110-G
	000111-H
01234567-физический адрес накопителя
0       -0
 1
	2
	 3
		4
		 5
			6
			 7-7


55555555555555555555555
01234567-младшая часть адреса цилиндра

666666666666666666666666
01234567-старшая часть адреса цилиндра

777777777777777777777777
01234567-формат байтов уточненного состояния
0123
0000    - 0
0001    - 1
0010    - 2
0011    - 3
0100    - 4
0101    - 5
0110    - 6
		4567- описывает подробности характеристик условий ошибок

формат 0
8  9  10 11 12 13 14 15 16 17 18 19 20 21 22 23
																								 - неиспользуются

формат 1 ОШИБКА ОБОТУДОВНИЯ УМ 100-200МБ
8  9  10 11 12 13 14 15 16 17 18 19 20 21 22 23
=========
8
01234567
0       -сбой индекса
 1      -смещение активное
	2     -незаконченная установка
	 3    -законченная установка
		4   -подключение
		 5  -внимание
			6 -занят
			 7-поиск сектора
=========
	 9
01234567
0       -не исп
 1      -диагностика 4
	2     -диагностика 2
	 3    -диагностика 1
		4   -неиспользуется
		 5  -режим 4
			6 -режим 2
			 7-режим 1
=========
			10
01234567-состояния монитора
=========
				 11
01234567-байт уточненного состояния
0       -останов программы
 1      -не исп
	2     -не исп
	 3    -не исп
		4   -неспр интерф
		 5  -неиспр монитора
			6 -не исп
			 7-команда отвергнута
=========
						12
01234567 неисправность записи считывания
0       -неисправность записи-считывания
 1      -не исп
	2     -ненормальный останов
	 3    -не исп
		4   -серво запрет
		 5  -нет разрешения установки
			6 -нет серво данных
			 7-четный цилиндр
							 13
=========
01234567 байт уточненного состояния
01234567 D0
									14
=========
01234567 D1
										 15
01234567 C0
=========

формат 6 статистика обращения ошибок
8-11 общее число считанных байтов
12-13 общее число корректируемых ошибок
14-15 общее число некорркет ошибок
16-17 общее число установок






--------------------------------------

03 - холостой ход

07 - установка
0b - установка цилиндра
1b - установка головки
		 используются только байты адреса цилиндра и головки
		 если адрес установки недействииелен то КАНАЛ КОНЧИЛ ВУ КОНЧИЛО КОМАН
		 КОМАНДА ОТВЕРГНУТА

0f - управлять пропуском счета
		 разрешает пропуск дефектной части области счета
		 передаются 3 байта ДЛИНА ОБЛАСТИ КЛЮЧА
												ДЛИНА ОБЛАСТИ ДАННЫХ

13 - ОРИЕНТАЦИЯ ВЫЗЫВАЕТ УСТАНОВКУ НА НУЛЕВОЙ ЦИЛИНДР И НУЛЕВУЮ ГОЛОВКУ
17 - ВОССТАНОВЛЕНИЕ

1f - УСТАНОВЛЕНИЕ МАСКИ ФАЙЛА
		 при несоответствии КК ВУК СБОЙ КОМАНДА ОТВЕРГНУТА
		 при командах установки   СБОЙ ЗАЩИТА ФАЙЛА
		 две команды не могут быть в цепочке
		 по окончанию цепочки маска == 00
		 01234567
		 ++
		 00       - запрет записи СА и R0
		 01       - запрет всех команд записи
		 10       - запрещает все команды форматной записи
		 11       - разрешает все команды записи
			 0
				++
				00    - разрешены все команды установки
				01    - разрешены команды установка цилиндра и установка головки
				10    - разрешает команду установки головки
				11    - запрещает все команды установки
					+
					0   - запрещена установка на инженерный цилиндр
					1   - разрешена установка на инженерный цилиндр
					 0
						+
						0 - запрещает режим прграммно-управляемого прерывания
						1 - разрешает PCI



*23 -  установка сектора
			предается 1 байт с номером сектора 0-127
			0-127 - КК ВУК
			127-254 - КК ВУК СБОЙ
			255     - холостой ход

*00 -  ПРОВЕРИТЬ ВВОД-ВЫВОД
			получается 1 байт СОСТОЯНИЯ ==00 или
			состояние отвергнутого байта или состояние прерывания

-------------------
04 -
a4 - считать и сбросить буфер регистрации
				УУ передает 24 БУС в формате 6

b4 - резервирует накопитель за коналом
		 резервирование сбрасывается освобождение накопителя или безусл резерв

94 - освободить накопитель
e4 - уточнить тип накопителя
	 0  1  2  3  4  5  6
	 ff 55 63 00 50 67 02	 100
	 ff 55 63 00 50 67 00	 200
	 ff 55 63 00 50 63 00	 317

14 - безусловное резервирование

-------------------
06 86 - считать данные
				область данных обраьотанная командой ПОИСК ИДЕНТИФИКАТОРА ил ПО КЛЮЧА
				- 8- обработанная СЧИТАТЬ СЧЕТ за которой следует эта команда
				область данных последней обнаруженной записи (исключая R0)
				при многодорожечной команде устройство управления выполняет процедуру
				переключения головки при обнаруженни индекса и команда выполняется
				на следующей дорожке Если при переключении головок обнаружен
				конец цилидра команда не выполняется с состояниями
				КАНАЛ КОНЧИЛ ВУК СБОЙ в БУС=КОНЕЦ ЦИЛИНДРА

0e  8e - считать ключ и данные (аналогично 06,86)

1e  9e - считать счет ключ и данные (аналогично 06.86)

16 96 -  считать запись R0
12 92 -  считать счет
1a 9а -  считать собственный адрес
02 -     считать НЗП
22 -     считать сектор
				 при выполнении команды в канал передается один байт данных
				 содержащий номер сектора последней обработанной записи

5e -     считать многократно счет ключ и данные
				 используется для воспроизведения данных из последующей обнаруженной
				 записи(за исключение R0 ) и всех остальных до индекса
-------------------
05 -   записать данные
00 -   записать ключ и данные
1d -   записать счет ключ и данные (ФОРМАТНАЯ)
01 -   записать специальный счет ключ и данные (ФОРМАТНАЯ)
15 -   записать R0
19 -   записать собственный адрес
			 100 - <flag><cyl><cyl><h><h>
			 200 - <flag><cyl><cyl><h><h>
			 317 - <смещение><смещение><flag><cyl><cyl><h><h>
11 -   стереть
-------------------
39 - b9 - поиск по равенству собственного адреса
				 МТ-выполнение операции начинается после переключения
				 на следующую дорожку
31 - b1 -поиск по равенству идентификатора
51 - d1 - поиск по преобладанию и преоблаанию идентификатора
71 - f1 - поиск по равенству или преобладанию
29 - a9 - поиск по равенству ключа
49 - c9 - поиск по преобладанию ключа
69 - f9 - поиск по равенству или преобладанию ключа
-------------------

ДЕФЕКТНАЯ ИЛИ ЗАПАСНАЯ ДОРОЖКА
если устройство управления обнаружит дефектную или запасную дорожку
до начала обмена данными оно определяет адрес соответствующей запасной или дефектной дорожки
и автоматически безпрерывания канальной программы выполняет
установку на эту дорожку ориентируется по индексу и требует
повторения последней команды

НОМЕР СЕКТОРА для 100 200 МБ на 3 меньше действительного (всего 0-127)
для 317 на четыре

ПЕРЕХОДЯЩАЯ ЗАПИСЬ
при обработке переходящей записи во время считывания или выполнения
неформатированной записи устройство управления автоматически увеличивает
номер головки при обнаружении индекса